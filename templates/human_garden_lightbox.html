{% extends "base.html" %}
{% load static %}

{% block main_content %}
  {{ event }}
 <script>
    function doWork(mediaArr){
      for (var i = 0; i < mediaArr.length; i++) {
        var cursor = mediaArr[i];
        var total = '';
        if ( !(cursor == null || cursor == '') ) {
          if (i == 0){
            total += '<div id=' + i + ' class="slide">' 
          } else {
            total += '<div id=' + i + ' class="slide" style="display: none;">'
          }
          
          switch (cursor.type) {
            case 'video':
              var video = '';
              if (cursor.file != null){
                video += '<video controls width="100%%">';
                video += '<source src="' + cursor.file + '" type="video/mp4">';
                video += '</video>';
              } else {
                var vid;
                if (cursor.link.substring(12, 13) == 'y'){
                  vid = cursor.link.substring(32, 43);
                  //console.log(vid);
                  video += '<iframe width="100%" height="100%" src="https://www.youtube.com/embed/' + vid + '" frameborder="0" allowfullscreen></iframe>';
                } else {
                  vid = cursor.link.substring(19);
                  video += '<iframe width="100%" height="100%" src="https://player.vimeo.com/video/' + vid + '?color=ffffff" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';
                }
              }
              total += video;
              break;
            case 'audio':
              var audio = '';
              if (cursor.file != null){
                audio += '<audio controls>';
                audio += '<source src="' + cursor.file + '" type="audio/mpeg">'
                audio += '</audio>';
              } else {
                audio += '<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://soundcloud.com/distantstatic/call-it-like-it-is"></iframe>'
                cursor.link;
              }
              total += audio;
              break;
            case 'image':
              var image = '';
              if (cursor.file != null){
                image += '<img width="100%" src="' + cursor.file + '">';
              } else {
                image += '<img width="100%" src="' + cursor.link + '">';
              }
              total += image;
              break;
            default:
              break;
          }
          total += '</div>';
          $('#media').append(total);
        }
      }
    }
</script>
{% endblock main_content %}
